<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="C:/Users/mtakatani/AnacondaProjects/inventory/guilty_inventory.sqlite3" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser pragmas query" current="3"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="6622"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><current_table name="4,14:maint_other_actage"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="t_aging" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="75"/><column index="2" value="51"/><column index="3" value="51"/><column index="4" value="51"/><column index="5" value="51"/><column index="6" value="51"/><column index="7" value="51"/><column index="8" value="51"/><column index="9" value="51"/><column index="10" value="51"/><column index="11" value="51"/><column index="12" value="59"/><column index="13" value="59"/><column index="14" value="59"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="t_guilty_base" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="129"/><column index="2" value="147"/><column index="3" value="53"/><column index="4" value="95"/><column index="5" value="54"/><column index="6" value="85"/><column index="7" value="63"/><column index="8" value="52"/><column index="9" value="80"/><column index="10" value="94"/><column index="11" value="77"/><column index="12" value="115"/><column index="13" value="115"/><column index="14" value="77"/><column index="15" value="105"/><column index="16" value="115"/><column index="17" value="77"/><column index="18" value="105"/><column index="19" value="104"/><column index="20" value="77"/><column index="21" value="105"/><column index="22" value="104"/><column index="23" value="77"/><column index="24" value="105"/><column index="25" value="104"/><column index="26" value="77"/><column index="27" value="105"/><column index="28" value="104"/><column index="29" value="77"/><column index="30" value="105"/><column index="31" value="104"/><column index="32" value="77"/><column index="33" value="105"/><column index="34" value="104"/><column index="35" value="77"/><column index="36" value="105"/><column index="37" value="104"/><column index="38" value="77"/><column index="39" value="105"/><column index="40" value="104"/><column index="41" value="85"/><column index="42" value="113"/><column index="43" value="112"/><column index="44" value="85"/><column index="45" value="113"/><column index="46" value="112"/><column index="47" value="85"/><column index="48" value="113"/><column index="49" value="112"/><column index="50" value="103"/><column index="51" value="103"/><column index="52" value="103"/><column index="53" value="103"/><column index="54" value="103"/><column index="55" value="103"/><column index="56" value="103"/><column index="57" value="103"/><column index="58" value="103"/><column index="59" value="103"/><column index="60" value="111"/><column index="61" value="111"/><column index="62" value="111"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="t_guilty_list" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="129"/><column index="2" value="145"/><column index="3" value="145"/><column index="4" value="97"/><column index="5" value="59"/><column index="6" value="57"/><column index="7" value="81"/><column index="8" value="95"/><column index="9" value="82"/><column index="10" value="116"/><column index="11" value="82"/><column index="12" value="109"/><column index="13" value="82"/><column index="14" value="109"/><column index="15" value="82"/><column index="16" value="109"/><column index="17" value="82"/><column index="18" value="109"/><column index="19" value="82"/><column index="20" value="109"/><column index="21" value="82"/><column index="22" value="109"/><column index="23" value="82"/><column index="24" value="109"/><column index="25" value="82"/><column index="26" value="109"/><column index="27" value="82"/><column index="28" value="109"/><column index="29" value="90"/><column index="30" value="117"/><column index="31" value="90"/><column index="32" value="117"/><column index="33" value="90"/><column index="34" value="117"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="t_inv" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="129"/><column index="2" value="147"/><column index="3" value="53"/><column index="4" value="52"/><column index="5" value="80"/><column index="6" value="54"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="t_other_actage" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="129"/><column index="2" value="145"/><column index="3" value="95"/><column index="4" value="121"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="t_other_actual_age" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="76"/><column index="2" value="73"/><column index="3" value="87"/><column index="4" value="121"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="t_other_newage" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="129"/><column index="2" value="145"/><column index="3" value="88"/><column index="4" value="121"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="v_guilty_MYEN" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="129"/><column index="2" value="145"/><column index="3" value="95"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="v_guilty_other_YEN" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="129"/><column index="2" value="145"/><column index="3" value="122"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="v_others" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_"><sort/><column_widths><column index="1" value="129"/><column index="2" value="145"/><column index="3" value="88"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="t_guilty_base_udate base">SELECT
	CASE 
	when sales_n0_Q &gt; 0 or purchase_n0_Q &gt; 0 then age_n0 
	when sales_n1_Q &gt; 0 or purchase_n1_Q &gt; 0 then age_n1
	when sales_n2_Q &gt; 0 or purchase_n2_Q &gt; 0 then age_n2
	when sales_n3_Q &gt; 0 or purchase_n3_Q &gt; 0 then age_n3
	when sales_n4_Q &gt; 0 or purchase_n4_Q &gt; 0 then age_n4
	when sales_n5_Q &gt; 0 or purchase_n5_Q &gt; 0 then age_n5
	when sales_n6_Q &gt; 0 or purchase_n6_Q &gt; 0 then age_n6
	when sales_n7_Q &gt; 0 or purchase_n7_Q &gt; 0 then age_n7
	when sales_n8_Q &gt; 0 or purchase_n8_Q &gt; 0 then age_n8
	when sales_n9_Q &gt; 0 or purchase_n9_Q &gt; 0 then age_n9
	when sales_n10_Q &gt; 0 or purchase_n10_Q &gt; 0 then age_n10
	when sales_n11_Q &gt; 0 or purchase_n11_Q &gt; 0 then age_n11
	when sales_n12_Q &gt; 0 or purchase_n12_Q &gt; 0 then age_n12
	else inv_age
	END as modified_age
FROM t_guilty_base inner join t_aging on inv_age = age_actual

</sql><sql name="t_guilty_base_udate final">UPDATE t_guilty_base
	SET inv_age_mod = (
		SELECT
			CASE 
				when sales_n0_Q &gt; 0 or purchase_n0_Q &gt; 0 then age_n0 
				when sales_n1_Q &gt; 0 or purchase_n1_Q &gt; 0 then age_n1
				when sales_n2_Q &gt; 0 or purchase_n2_Q &gt; 0 then age_n2
				when sales_n3_Q &gt; 0 or purchase_n3_Q &gt; 0 then age_n3
				when sales_n4_Q &gt; 0 or purchase_n4_Q &gt; 0 then age_n4
				when sales_n5_Q &gt; 0 or purchase_n5_Q &gt; 0 then age_n5
				when sales_n6_Q &gt; 0 or purchase_n6_Q &gt; 0 then age_n6
				when sales_n7_Q &gt; 0 or purchase_n7_Q &gt; 0 then age_n7
				when sales_n8_Q &gt; 0 or purchase_n8_Q &gt; 0 then age_n8
				when sales_n9_Q &gt; 0 or purchase_n9_Q &gt; 0 then age_n9
				when sales_n10_Q &gt; 0 or purchase_n10_Q &gt; 0 then age_n10
				when sales_n11_Q &gt; 0 or purchase_n11_Q &gt; 0 then age_n11
				when sales_n12_Q &gt; 0 or purchase_n12_Q &gt; 0 then age_n12
				ELSE inv_age
			END
		FROM t_aging WHERE inv_age = age_actual
		)
		
	WHERE EXISTS (
		SELECT * FROM t_aging WHERE inv_age = age_actual
		)

	
		

</sql><sql name="SQL 8">        SELECT 
            inv_month,
            inv_model,
            CASE
				when t_guilty_base.inv_month = t_other_newage.inv_month and t_guilty_base.inv_model = t_other_newage.inv_model THEN
				t_other_newage.inv_model_digest
            END as inv_model_digest,
			business_unit,
            inv_age,
            inv_qty,
            inv_KMXN,
            inv_MYEN,
            sales_n0_Q,
            sales_n0_KMXN,
            sales_n1_Q,
            sales_n1_KMXN,
            sales_n2_Q,
            sales_n2_KMXN,
            sales_n3_Q,
            sales_n3_KMXN,
            sales_n4_Q,
            sales_n4_KMXN,
            sales_n5_Q,
            sales_n5_KMXN,
            sales_n6_Q,
            sales_n6_KMXN,
            sales_n7_Q,
            sales_n7_KMXN,
            sales_n8_Q,
            sales_n8_KMXN,
            sales_n9_Q,
            sales_n9_KMXN,
            sales_n10_Q,
            sales_n10_KMXN,
            sales_n11_Q,
            sales_n11_KMXN,
            sales_n12_Q,
            sales_n12_KMXN

        FROM t_guilty_base
</sql><current_tab id="2"/></tab_sql></sqlb_project>
